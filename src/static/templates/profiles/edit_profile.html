{% extends 'base.html' %}

<link href="{{ STATIC_URL }}css/edit_profile.css" rel="stylesheet">


{% block jquery %}
$('#myTab a').click(function (e) {
  e.preventDefault()
  $(this).tab('show')
})
{% endblock %}

{% block content %}
<div class="row">
  <div class="edit_profile_navbar" id="secondary_navbar">
        <h1>Edit Profile</h1>
  </div>
</div>



  <div class='col-lg-10 col-12'>
{% if messages %}
<div class="row">
<div class="col-md-1" id="tertiary_navbar">
    {% for message in messages %}
    <p  id="interests_messages"{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</p>
    {% endfor %}
</div>
</div>
{% endif %}

<div class="container" id="edit_profile_container">
  <div class="edit_profile_wrapper">
  <ul class="nav nav-tabs" id="myTab">
    <li class="active"><a href="#home" data-toggle="tab">Pictures</a></li>
    <li><a href="#jobs" data-toggle="tab">Occupation</a></li>
    <li><a href="#locations" data-toggle="tab">Location</a></li>
    <li><a href="#info" data-toggle="tab">Info</a></li>
    <li><a href="#delete_account" data-toggle="tab">Delete Account</a></li>
  </ul>
  <br>
  <div class="tab-content">
    <div class="tab-pane active" id="home">
    	<form method='POST' action='/edit/pictures/' enctype="multipart/form-data"> {% csrf_token %}
    	<div class='row'>
    		<div class='col-lg-12'>
    {{ formset_p.management_form }}
     {% for form in formset_p %}
      <div id="form_container">{{ form }}
        <br><br>
      </div>
      {% endfor %}
  		</div>
  	</div>
    <br>

  	<input class='btn btn-success' type='submit' value='Update' />
  	</form>
    <input class='btn btn-success'  type="submit" id="pictures_show" value="Add Images"/>
    </div>
    <div class="tab-pane" id="jobs">
    	<div class='row'>
    		<div class='col-lg-12'>
    			<form method='POST' action='/edit/jobs'> {% csrf_token %}
          {{ formset_j.management_form }}
  			  {{ formset_j.as_p }}
  			<input class='btn btn-success' type='submit' value='Update' />
  			</form>
  		</div>
  	</div>
    </div>
    <div class="tab-pane" id="locations">
    	<div class='row'>
    		<div class='col-lg-12'>
    			<form method='POST' action='/edit/addresses/'> {% csrf_token %}
            {{ formset_a.management_form }}
  			    {{ formset_a.as_p }}
  			<input class='btn btn-success' type='submit' value='Update' />
  			</form>
  		</div>
  	</div>
    </div>
    <div class="tab-pane" id="info">
      <div class='row'>
        <div class='col-lg-12'>
          <form method='POST' action='/edit/info/'> {% csrf_token %}
            <div id="info_forms">
            {{ formset_i.management_form }}
            {{ formset_i.as_p }}
            </div>
        <input class='btn btn-success' type='submit' value='Update' />
        </form>
      </div>
      </div>
    </div>
    <div class="tab-pane" id="delete_account">
      <div class='row'>
        <div class='col-lg-12'>
          <form method='POST' action='/edit/delete_account/'>
          </form>
          <h3 class="delete_info"> If you choose to delete your account, all your information will be deleted and you will not be able to recover it. </h3>
           <a href='{% url "delete_account" %}'><div class="btn-lg">Delete Account</div></a>      
         </div>
    </div>
    </div>
  </div>
</div>
</div>
</div>
</div>
<script>
  var picture_form = document.getElementById('id_form-0-id');
    if (picture_form.value === "") {
      $("#form_container:nth-of-type(0)").show();
    } else {
      $("#form_container:nth-of-type(0)").show();
    };
  var picture_form2 = document.getElementById('id_form-1-id');
    if (picture_form2.value === "") {
      $("#form_container:nth-of-type(2)").hide();
    } else {
      $("#form_container:nth-of-type(2)").show();
    };
  var picture_form3 = document.getElementById('id_form-2-id');
    if (picture_form3.value === "") {
      $("#form_container:nth-of-type(3)").hide();
    } else {
      $("#form_container:nth-of-type(3)").show();
    };
  var picture_form4 = document.getElementById('id_form-3-id');
    if (picture_form4.value === "") {
      $("#form_container:nth-of-type(4)").hide();
    } else {
      $("#form_container:nth-of-type(4)").show();
    };
  var picture_form5 = document.getElementById('id_form-4-id');
    if (picture_form5.value === "") {
      $("#form_container:nth-of-type(5)").hide();
    } else {
      $("#form_container:nth-of-type(5)").show();
    };
  var picture_form5 = document.getElementById('id_form-4-id');
    if (picture_form5.value > 0){
    $("#pictures_show").hide();
  };
</script>
<script>
$("#pictures_show").click(function(){
  $("#form_container:nth-of-type(2)").show("slow");
  $("#form_container:nth-of-type(3)").show("slow");
  $("#form_container:nth-of-type(4)").show("slow");
  $("#form_container:nth-of-type(5)").show("slow");
});

if (picture_form5.value > 0){
  $("#pictures_show").hide();
}
</script>
{% endblock %}